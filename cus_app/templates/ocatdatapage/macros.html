<!-- Ocatdatapage Page Macros-->
{% macro render_rank(i, field) %}
    <tr id="{{ field.id }}">
        <th style='padding-left:5px;'>{{i}}</th>
        {% for subfield in field%}
            <td style='padding-left:5px;'>{{subfield()}}</td>
        {% endfor %}
    </tr>
{% endmacro %}

{% macro render_field(field, size=10) %}
    <th style='padding-left:5px;'> {{ field.label.text }}: </th>
    {% if field.type in ('StringField', 'FloatField', 'IntegerField', 'TimeRankDateTimeField') %}
        <td> {{ field(size = size) }} </td>
    {% elif field.type in ('SelectField', 'ButtonField', 'SubmitField')%}
        <td> {{ field() }} </td>
    {% else %}
        <td>Unspecified Field Type</td>
    {% endif %}
{% endmacro %}

{% macro render_value(data, label) %}
    <th style='padding-left:5px;'> {{ label }}: </th>
    {% if data == None %}
    <td>NA</td>
    {% else %}
    <td>{{ data }}</td>
    {% endif %}
{% endmacro %}


{% macro help_popup_page(html, link_name, font_size=100, name='help') %}
    <a href="javascript:WindowOpener('{{ html }}', '{{ name }}')">
        <span style="font-size:{{ font_size }}%;">
            {{ link_name }}
        </span>
    </a>
{% endmacro %}

{% macro map_image_opener(map, color, _LABELS, orient_maps) %}    
    {% if orient_maps[map] ==  'NoImage'%}
        <span style='color:{{ color }};'>No {{ _LABELS.get(map) }} Link</span>
    {% else %}
        {% set link = form %}
        <a href="javascript:ImageOpener('{{ orient_maps[map] }}')">
        <span style='color:{{ color }};'>{{ _LABELS.get(map) }}</span>
        </a>
    {% endif %}
{% endmacro %}

<!-- Confirmation Page Macros-->
{% macro compare_param_values(param, ocat_form_dict, change_dict, _LABELS) %}
    {% if param in change_dict.keys() %}
        <th><span  style='color:red;'>{{ _LABELS.get(param)  }}</span></th>
        <td><span  style='color:red;'>{{ change_dict.get(param)[0] }}</span></td>
        <td><span  style='color:red;'>{{ change_dict.get(param)[0] }}</span></td>
    {% else %}
        <th>{{ _LABELS.get(param) }} </th>
        <td>{{ ocat_form_dict.get(param) }}</td>
        <td>No Change</td>
    {% endif %}
{% endmacro %}

{% macro remark_section(original, remark_change) %}
    {% if remark_change != None %}
        <h4 style='text-decoration: underline;'>Original</h4>
            <p>
                {% if remark_change[0] == None %}
                    <span style='padding-left:50px;font-style:italic'>NA</span>
                {% else %}
                    <p style='padding-left:20px;'>{{remark_change[0].replace('\n','<br>')}}</p>
                {% endif %}
            </p>
        <hr style='border-top:1px dotted;'>
        <h4 style='text-decoration: underline;'>New</h4>
            <p>
                {% if remark_change[1] == None %}
                    <span style='padding-left:50px;color:red;font-style:italic'>NA</span>
                {% else %}
                    <p style='padding-left:20px;color:red;'>{{remark_change[1].replace('\n','<br>')}}</p>
                {% endif %}
            </p>
    {% elif original != None %}
        <h4 style='text-decoration: underline;'>Original</h4>
            <p>
                <span style='padding-left:50px;font-style:italic;'>{{original}}</span>
            </p>
        <hr style='border-top:1px dotted;'>
        <h4 style='text-decoration: underline;'>New</h4>
            <p>
                <span style='padding-left:50px;font-style:italic;'>{{original}}</span>
            </p>
    {% else %}
        <h4 style='text-decoration: underline;'>Original</h4>
            <p>
                <span style='padding-left:50px;font-style:italic;'>NA</span>
            </p>
        <hr style='border-top:1px dotted;'>
        <h4 style='text-decoration: underline;'>New</h4>
            <p>
                <span style='padding-left:50px;font-style:italic;'>NA</span>
            </p>
    {% endif %}
{% endmacro %}
